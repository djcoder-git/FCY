<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>JSON → HTML Table</title>
<style>
  body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial; padding: 18px; }
  input[type="search"] { padding: 8px; width: 320px; margin-bottom: 12px; }
  table { border-collapse: collapse; width: 100%; max-width: 1200px;}
  th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
  th { cursor: pointer; background: #f3f4f6; position: relative; }
  th .sortdir { font-size: 0.8em; margin-left: 6px; color:#666; }
  tr:nth-child(even){ background: #fbfbfb; }
  .small { font-size: 0.9em; color:#555; }
</style>
</head>
<body>
<h2>JSON → HTML Table</h2>
<p class="small">Data source: <code>tableConvert.com_7hyjku.json</code>. Save this file next to that JSON and open via a local server.</p>

<input id="search" type="search" placeholder="Search table (Playlist Name, Category, Views, etc.)" />

<table id="data-table">
  <thead id="thead"></thead>
  <tbody id="tbody"></tbody>
</table>

<script>
(async function(){
  // change path if your JSON is named differently
  const resp = await fetch('./tableConvert.com_7hyjku.json');
  const data = await resp.json();

  if (!Array.isArray(data) || data.length === 0) {
    document.body.insertAdjacentHTML('beforeend', '<p>No array data found in JSON.</p>');
    return;
  }

  const columns = Object.keys(data[0]);
  const thead = document.getElementById('thead');
  const tbody = document.getElementById('tbody');

  // build header with clickable sort
  thead.innerHTML = '<tr>' + columns.map(c => `<th data-col="${c}">${c} <span class="sortdir"></span></th>`).join('') + '</tr>';

  let currentSort = { col: null, asc: true };

  function formatCell(key, val) {
    // trim views and format as number where appropriate
    if (key.toLowerCase().includes('views')) {
      // remove commas/spaces and show a nicer number
      const n = Number(String(val).replace(/[^\d.-]/g,''));
      return isFinite(n) ? n.toLocaleString() : val;
    }
    if (key.toLowerCase().includes('date')) {
      // try parse ISO date
      const d = new Date(val);
      return isNaN(d) ? val : d.toLocaleString();
    }
    return String(val);
  }

  function renderRows(rows) {
    tbody.innerHTML = rows.map(row => '<tr>' + columns.map(c => `<td>${escapeHtml(formatCell(c, row[c] ?? ''))}</td>`).join('') + '</tr>').join('');
  }

  function escapeHtml(s){
    return s.replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;');
  }

  // initial render
  let rows = data.slice();
  renderRows(rows);

  // sorting
  document.querySelectorAll('th[data-col]').forEach(th => {
    th.addEventListener('click', () => {
      const col = th.dataset.col;
      const asc = (currentSort.col === col) ? !currentSort.asc : true;
      currentSort = { col, asc };
      // sort heuristics: numeric when possible, else string
      rows.sort((a,b) => {
        const av = a[col] ?? '';
        const bv = b[col] ?? '';
        const an = Number(String(av).replace(/[^\d.-]/g,''));
        const bn = Number(String(bv).replace(/[^\d.-]/g,''));
        if (isFinite(an) && isFinite(bn)) return asc ? an - bn : bn - an;
        return asc ? String(av).localeCompare(String(bv)) : String(bv).localeCompare(String(av));
      });
      // update header indicators
      document.querySelectorAll('.sortdir').forEach(s => s.textContent = '');
      th.querySelector('.sortdir').textContent = asc ? '▲' : '▼';
      renderRows(rows);
    });
  });

  // search
  document.getElementById('search').addEventListener('input', (e) => {
    const q = e.target.value.trim().toLowerCase();
    if (!q) { renderRows(rows); return; }
    const filtered = rows.filter(r => Object.values(r).some(v => String(v).toLowerCase().includes(q)));
    renderRows(filtered);
  });

})();
</script>
</body>
</html>
